<!DOCTYPE html>
<!-- This is an autogenerated file - DO NOT EDIT DIRECTLY -->
<!-- This file was generated on Sat Apr 24 2021 20:10:44 GMT-0700 (Pacific Daylight Time) via the forge in willcarh.art v2.1.0-->
<!-- Learn more: https://github.com/wcarhart/willcarh.art -->
<!-- THIS IS A DEVELOPMENT BUILD, PROCEED WITH CAUTION! -->
<html lang="en">
	<head>
		<!-- metadata -->
		<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>willcarh.art</title>
<meta name="description" content="How to Print File Trees on the Command Line" />
<meta name="twitter:card" value="summary" />
<meta property="og:name" content="willcarh.art" />
<meta property="og:url" content="https://willcarh.art/blog/how-to-print-file-trees-on-the-command-line" />
<meta property="og:image" content="../../ico/android-chrome-512x512.png" />
<meta property="og:type" content="website" />
<meta property="og:description" content="How to Print File Trees on the Command Line" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="willcarh.art" />

		<!-- CSS -->
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../../css/logo.css">
		<link rel="stylesheet" href="../../css/darkmode.css">
		<link rel="stylesheet" href="../../css/fancylink.css">
		<link rel="stylesheet" href="../../css/linkicons.css">
		<link rel="stylesheet" href="../../css/list.css">
		<link rel="stylesheet" href="../../css/markdown.css">
		<link rel="stylesheet" href="../../css/credits.css">
		<link rel="stylesheet" href="../../css/blog_specific.css">

		<!-- jQuery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<!-- Bootstrap CDN -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

		<!-- icons -->
		<link rel="apple-touch-icon" sizes="180x180" href="../../ico/apple-touch-icon.png">
	    <link rel="icon" type="image/png" sizes="32x32" href="../../ico/favicon-32x32.png">
	    <link rel="icon" type="image/png" sizes="16x16" href="../../ico/favicon-16x16.png">
	    <link rel="manifest" href="../../ico/site.webmanifest">

	    <!-- FontAwesome -->
	    <script src="https://use.fontawesome.com/releases/v5.5.0/js/all.js"></script>

		<!-- animate.css -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

		<!-- site analytics -->
		<script async defer data-domain="willcarh.art" src="https://plausible.io/js/plausible.js"></script>

		<!-- willcarh.art scripts -->
		<script src="../js/darkmode.js"></script>
		<script src="../js/year.js"></script>
		<script src="../js/epochtime.js"></script>
		<script src="../js/readtime.js"></script>
		<script src="../js/blognav.js"></script>
	</head>
	<body>
		<!-- text content -->
		<div id="content-main">
			<div class="spacer"></div>
			<div id="content-body">
				<div id="word-count" class="hidden-tidbit">1276</div>
<div id="read-time" class="hidden-tidbit">7 min read</div>
<div id="next-blog-link" class="hidden-tidbit">how-to-create-the-typewriter-effect-in-javascript</div>
<div id="blog-title-container" class="animate__animated animated_faster animate__fadeInUp animate__delay-1s">
	<h1 id="blog-title">How to Print File Trees on the Command Line</h1>
	<h3 id="blog-subtitle">Spruce up your file system</h3>
</div>
<div id="blog-credits" class="animate__animated animated_faster animate__fadeInUp animate__delay-2s">
	<div class="row justify-content-center">
		<div id="blog-author-img-container">
			<img id="blog-author-img" alt="author profile image" src="https://storage.googleapis.com/willcarh-art/img/profile.jpg">
		</div>
		<div id="blog-credits-details">
			<h5 id="blog-author">Will Carhart</h5>
			<p class="blog-metadata epochtime-hover">Published on January 18th, 2021 at 10:02 AM PST</p>
			<p class="blog-metadata epochtime-hover"></p>
			<p class="blog-metadata readtime-hover"><span class="color">7 min read</span></p>
		</div>
	</div>
</div>
<div id="blog-cover-container" class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<img id="blog-cover" alt="How to Print File Trees on the Command Line cover image" src="https://storage.googleapis.com/willcarh-art/img/blog/how-to-print-file-trees-on-the-command-line/cover.jpg">
</div>

<div id="blog-content-container" class="blog-border animate__animated animated_faster animate__fadeIn animate__delay-4s">
    <h4 class="content-subtitle">Why should we care?</h4><p class="content-text">Have you ever written a program that needed to print a list of files to the command line? Perhaps you've done some processing to some files and need to alert the user of the result. The easy way is to print the <a class="fancy-link" href="https://man7.org/linux/man-pages/man3/basename.3.html" target="_blank">basename</a> of the files, one after the next. But, what if the files are from different directories? Well, we could print the absolute paths to each file, one after the next. This a great approach for most cases. However, what happens when we have many files?</p><br><h4 class="content-subtitle">A more illustrative picture of a directory</h4><p class="content-text">You may have used or heard of the Linux tool <a class="fancy-link" href="https://linux.die.net/man/1/tree" target="_blank"><code class="inline-code">tree</code></a>. It's an underrated tool that paints a better picture of a directory structure. For instance, consider the following file list.</p><pre class="code-container"><code class="block-code">/myProj/app/index.html<br>/myProj/css/style.css<br>/myProj/app/index.js<br>/myProj/res/logo.png<br>/myProj/res/logo.ico<br>/myProj/config.json<br>/myProj/package.json<br>/myProj/app/blog/post.html</code></pre><p class="content-text">By looking at this file list, can you quickly infer the directory structure? Perhaps you can, but I would argue that most do not, at least instinctively. In addition, this is a small example, imagine if we had 50 or 100 files to show. It would be difficult to infer the project structure from just the absolute path names.</p><p class="content-text">This is where <code class="inline-code">tree</code> comes in. We can use <code class="inline-code">tree</code> to build a <i>visual file tree</i> of a directory. Let's try it out with our example.</p><pre class="code-container"><code class="block-code">tree .</code></pre><pre class="code-container"><code class="block-code">.<br>â”œâ”€â”€ app<br>â”‚   â”œâ”€â”€ blog<br>â”‚   â”‚   â””â”€â”€ post.html<br>â”‚   â”œâ”€â”€ index.html<br>â”‚   â””â”€â”€ index.js<br>â”œâ”€â”€ config.json<br>â”œâ”€â”€ css<br>â”‚   â””â”€â”€ style.css<br>â”œâ”€â”€ package.json<br>â””â”€â”€ res<br>    â”œâ”€â”€ logo.ico<br>    â””â”€â”€ logo.png</code></pre><p class="content-text">Pretty cool, right? Now we can easily see how our project is structured. However, <code class="inline-code">tree</code> is a Linux command line tool. What if we want to use it in our code (without calling it from the command line)? Let's break down some of the logic and see if we can write our own in both Python and JavaScript.</p><br><h4 class="content-subtitle">A fun application of recursion</h4><p class="content-text">The logic behind <code class="inline-code">tree</code> is simple. Let's break it down into some pseudocode.</p><ol start=1><li><span>Iterate through every item in the directory.</span></li><li><span>If the item is a file, print it.</span></li><li><span>If the item is a directory, recursively repeat this process.</span></li></ol><p class="content-text">Were we to code this up right now, we'd have a solution that prints the contents of a directory recursively. However, the real power of <code class="inline-code">tree</code> comes from the visual directory structure. When we dive into a directory, <code class="inline-code">tree</code> indents the filenames to visually represent the structure. In addition, there are "pretty" lines drawn between each item in the directory, with <code class="inline-code">â””â”€â”€</code> listing the last item in the directory and <code class="inline-code">â”œâ”€â”€</code> for everything else.</p><p class="content-text">The key to achieving this is keeping track of how deep our recursion is. If we know we are two recursive calls deep, then we need to indent all the filenames in the directory and prefix them appropriately. Let's take a look at how to achieve this in practice.</p><br><h4 class="content-subtitle">Using Python</h4><p class="content-text">First, we'll need a way to perform some file operations. Python has a nice standard library <code class="inline-code">os</code> for interacting with the file system, among other things.</p><pre class="code-container"><code class="block-code">import os</code></pre><p class="content-text">Next, we'll need to translate our pseudocode above into Python. In addition, we'll need to add a few variables to keep track of the line prefixes so we can properly indent our resulting directory strucutre.</p><pre class="code-container"><code class="block-code">def build_tree(entity, indent, is_head, is_tail, result):<br>    # determine if entity is a directory or file<br>    files = []<br>    if os.path.isdir(entity):<br>        files = os.listdir(entity)<br><br>    # keep track of line prefixes<br>    entity_prefix = 'â””â”€â”€ ' if is_tail else 'â”œâ”€â”€ '<br>    content_prefix = '    ' if is_tail else '|   '<br>    if is_head:<br>        entity_prefix = content_prefix = ''<br><br>    # add entity to the output<br>    result += indent + entity_prefix + os.path.basename(entity) + '\n'<br><br>    # if entity is a directory, recurse through its contents<br>    for index in range(len(files) - 1):<br>        result = build_tree(os.path.join(entity, files[index]), indent + content_prefix, False, False, result)<br>    if len(files) &gt; 0:<br>        result = build_tree(os.path.join(entity, files[-1]), indent + content_prefix, False, True, result)<br>    return result</code></pre><p class="content-text">Finally, let's write a simple helper function. Our recursive function will be more usable if it only has one argument, which is the directory to print. The user of our recursive function doesn't need to know about the other arguments. Let's call this new helper function <code class="inline-code">generate_file_tree</code>.</p><pre class="code-container"><code class="block-code">def generate_file_tree(entity):<br>    tree = build_tree(entity, '', True, True, '')<br>    print(tree)</code></pre><p class="content-text">Now we can use our code with <code class="inline-code">generate_file_tree('~/myProj')</code>.</p><br><h4 class="content-subtitle">Using JavaScript</h4><p class="content-text">The JavaScript version is a translation of the Python version; it uses the same logic. Let's write it asynchronously for now, but you can convert it to synchronous code if you'd like. We'll use <code class="inline-code">fs</code> and <code class="inline-code">path</code> to perform the file operations. We'll also promisify our file operations so they fit with our asynchronous code.</p><pre class="code-container"><code class="block-code">const fs = require('fs')<br>const path = require('path')<br>const util = require('util')<br>const readdirPromise = util.promisify(fs.readdir)<br>const statPromise = util.promisify(fs.stat)</code></pre><p class="content-text">The recursive function <code class="inline-code">buildTree</code> uses the pseudocode we developed above. It will keep track of the current indent to create the nested directory stucture, same as with the Python version.</p><pre class="code-container"><code class="block-code">const buildTree = async (entity, indent, isHead, isTail, result) =&gt; {<br>    // determine if entity is a directory or file<br>    let stats = await statPromise(entity)<br>    let files = []<br>    if (stats.isDirectory()) {<br>        files = await readdirPromise(entity)<br>    }<br><br>    // keep track of line prefixes<br>    let entityPrefix = isTail === true ? 'â””â”€â”€ ' : 'â”œâ”€â”€ '<br>    let contentPrefix = isTail === true ? '    ' : '|   '<br>    if (isHead === true) {<br>        entityPrefix = ''<br>        contentPrefix = ''<br>    }<br><br>    // add entity to the output<br>    result += indent + entityPrefix + path.basename(entity) + '\n'<br><br>    // if entity is a directory, recurse through its contents<br>    for (let index = 0; index &lt; files.length - 1; index++) {<br>        result = await buildTree(path.join(entity, files[index]), indent + contentPrefix, false, false, result)<br>    }<br>    if (files.length &gt; 0) {<br>        result = await buildTree(path.join(entity, files[files.length - 1]), indent + contentPrefix, false, true, result)<br>    }<br>    return result<br>}</code></pre><p class="content-text">Similar to the Python version, let's create a helper function <code class="inline-code">generateFileTree</code> so it appears our function only takes in one argument, which is the directory to print.</p><pre class="code-container"><code class="block-code">const generateFileTree = async (entity) =&gt; {<br>    let tree = await buildTree(entity, '', true, true, '')<br>    console.log(tree)<br>}</code></pre><p class="content-text">Now we can use our code with <code class="inline-code">await generateFileTree('~/myProj')</code>.</p><br><h4 class="content-subtitle">Conclusion</h4><p class="content-text">Pulling back the curtain on <code class="inline-code">tree</code> is a great practice in recursion. Now we can use that functionality for all of our command line tools. If you'd like to replicate this logic in another language, it shouldn't be too hard based on the code we've developed here. If you'd like a complete copy of the code from this post, check out <a class="fancy-link" href="https://github.com/wcarhart/willcarh.art-snippets/tree/master/how-to-print-file-trees-on-the-command-line" target="_blank">this repository</a>. If you'd like to see this code in action, check out the code for <a class="fancy-link" href="../../index.html">willcarh.art's</a> custom <a class="fancy-link" href="https://github.com/wcarhart/willcarh.art/blob/master/generator/generator.js" target="_blank">static site generator</a>, or check out my project <a class="fancy-link" href="../project/algos.html">algos</a> where I talk about the <a class="fancy-link" href="../blog/reducing-aws-s3-storage-costs-with-bubble-trees.html">Bubble Tree</a>.</p><br><p class="content-text centered-text">ðŸ¦‰</p>
</div>
<div class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<p id="cover-credit">Artwork by <a class="fancy-link" href="https://stock.adobe.com/contributor/207352372/sivenkov" target="_blank">Sivenkov</a></p>
</div>
<div id="blog-navigation-container" class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<div class="row">
		<div class="col-md-1"></div>
		<div id="blog-navigation-back" class="col-md-4 blog-navigation-chunk">
			<h3><span class="show-more">âŸµ</span> Back</h3>
			<p class="navigation-detail-text content-text">Go back to the blog</p>
		</div>
		<div class="col-md-2"></div>
		<div id="blog-navigation-next" class="col-md-4 blog-navigation-chunk">
			<h3>Read More <span class="show-more">âŸ¶</span></h3>
			<p class="navigation-detail-text content-text">How to Create the Typewriter Effect in JavaScript</p>
		</div>
		<div class="col-md-1"></div>
	</div>
</div>
<div class="spacer-small"></div>
			</div>
			<div class="spacer"></div>

			<div id="credits" class="row">
	<a id="footer-github-icon" href="https://github.com/wcarhart" target="_blank"><i class="fab fa-github"></i></a>
	<a id="footer-stackoverflow-icon" href="https://stackoverflow.com/users/6246128/wcarhart" target="_blank"><i class="fab fa-stack-overflow" data-fa-transform="left-2"></i></a>
	<a id="footer-linkedin-icon" href="https://linkedin.com/in/willcarhart" target="_blank"><i class="fab fa-linkedin" data-fa-transform="left-2"></i></a>
	<a id="footer-facebook-icon" href="../blog/why-i-deleted-my-facebook.html"><i class="fab fa-facebook-f" data-fa-transform="left-4"></i></a>
	<div style="text-align:center"><a class="fancy-link" href="../etc.html#license">&copy;&nbsp; Will Carhart <span id="year"></span></a></div>
</div>
			<div class="spacer-small"></div>
		</div>

		<!-- logo -->
		<a id="logo-container" href="../../index.html">
	<img id="logo" alt="willcarh.art logo" src="../../ico/android-chrome-512x512.png">
</a>

		<!-- dark mode toggle -->
		<div id="dark-mode-toggle-container">
	<button id="dark-mode-toggle"></button>
</div>
	</body>
</html>