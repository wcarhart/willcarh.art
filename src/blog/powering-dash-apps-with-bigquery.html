<!DOCTYPE html>
<!-- This is an autogenerated file - DO NOT EDIT DIRECTLY -->
<!-- This file was generated on Sun Apr 25 2021 00:10:45 GMT-0700 (Pacific Daylight Time) via the forge in willcarh.art v2.1.0-->
<!-- Learn more: https://github.com/wcarhart/willcarh.art -->
<!-- THIS IS A DEVELOPMENT BUILD, PROCEED WITH CAUTION! -->
<html lang="en">
	<head>
		<!-- metadata -->
		<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>willcarh.art</title>
<meta name="description" content="Powering Dash Apps with Bigquery" />
<meta name="twitter:card" value="summary" />
<meta property="og:name" content="willcarh.art" />
<meta property="og:url" content="https://willcarh.art/blog/powering-dash-apps-with-bigquery" />
<meta property="og:image" content="../../ico/android-chrome-512x512.png" />
<meta property="og:type" content="website" />
<meta property="og:description" content="Powering Dash Apps with Bigquery" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="willcarh.art" />

		<!-- CSS -->
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../../css/logo.css">
		<link rel="stylesheet" href="../../css/darkmode.css">
		<link rel="stylesheet" href="../../css/fancylink.css">
		<link rel="stylesheet" href="../../css/linkicons.css">
		<link rel="stylesheet" href="../../css/list.css">
		<link rel="stylesheet" href="../../css/markdown.css">
		<link rel="stylesheet" href="../../css/credits.css">
		<link rel="stylesheet" href="../../css/blog_specific.css">

		<!-- jQuery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<!-- Bootstrap CDN -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

		<!-- icons -->
		<link rel="apple-touch-icon" sizes="180x180" href="../../ico/apple-touch-icon.png">
	    <link rel="icon" type="image/png" sizes="32x32" href="../../ico/favicon-32x32.png">
	    <link rel="icon" type="image/png" sizes="16x16" href="../../ico/favicon-16x16.png">
	    <link rel="manifest" href="../../ico/site.webmanifest">

	    <!-- FontAwesome -->
	    <script src="https://use.fontawesome.com/releases/v5.5.0/js/all.js"></script>

		<!-- animate.css -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

		<!-- site analytics -->
		<script async defer data-domain="willcarh.art" src="https://plausible.io/js/plausible.js"></script>

		<!-- willcarh.art scripts -->
		<script src="../js/darkmode.js"></script>
		<script src="../js/year.js"></script>
		<script src="../js/epochtime.js"></script>
		<script src="../js/readtime.js"></script>
		<script src="../js/blognav.js"></script>
	</head>
	<body>
		<!-- text content -->
		<div id="content-main">
			<div class="spacer"></div>
			<div id="content-body">
				<div id="word-count" class="hidden-tidbit">809</div>
<div id="read-time" class="hidden-tidbit">5 min read</div>
<div id="next-blog-link" class="hidden-tidbit">why-i-deleted-my-facebook</div>
<div id="blog-title-container" class="animate__animated animated_faster animate__fadeInUp animate__delay-1s">
	<h1 id="blog-title">Powering Dash Apps with BigQuery</h1>
	<h3 id="blog-subtitle">Dream big, query bigger</h3>
</div>
<div id="blog-credits" class="animate__animated animated_faster animate__fadeInUp animate__delay-2s">
	<div class="row justify-content-center">
		<div id="blog-author-img-container">
			<img id="blog-author-img" alt="author profile image" src="https://storage.googleapis.com/willcarh-art/img/profile.jpg">
		</div>
		<div id="blog-credits-details">
			<h5 id="blog-author">Will Carhart</h5>
			<p class="blog-metadata epochtime-hover">Published on March 12th, 2021 at 9:48 AM PST</p>
			<p class="blog-metadata epochtime-hover"></p>
			<p class="blog-metadata readtime-hover"><span class="color">5 min read</span></p>
		</div>
	</div>
</div>
<div id="blog-cover-container" class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<img id="blog-cover" alt="Powering Dash Apps with BigQuery cover image" src="https://storage.googleapis.com/willcarh-art/img/blog/powering-dash-apps-with-bigquery/cover.png">
</div>

<div id="blog-content-container" class="blog-border animate__animated animated_faster animate__fadeIn animate__delay-4s">
    <img class="content-img" alt="Mugato Zoolander Meme: top: reactive web apps, bottom: so hot right now" src="https://storage.googleapis.com/willcarh-art/img/blog/powering-dash-apps-with-bigquery/reactive-web-app-meme.jpeg"><p class="img-subtitle"></p><h4 class="content-subtitle">A primer on Plotly and Dash</h4><p class="content-text">It's an average day as a software engineer during COVID-19. You said last night you'd be up by 8am but it's 8:30am and you're still in bed. You make sure to check Slack on your phone so your co-workers think you're online despite the fact that the covers are pulled up to your nose. At 8:57am, you groggily roll out of bed for your 9am Zoom standup and put on the same sweatshirt from yesterday you left wadded on the floor. While someone drones on about semicolon rules in the repo's <code class="inline-code">.eslintrc</code> you hop on Reddit and browse <a class="fancy-link" href="https://www.reddit.com/r/dataisbeautiful/" target="_blank">r/DataIsBeautiful</a>. You're now awake gazing wide-eye at the beautiful visuals other software engineers and data scientists are creating. Someone made an interactive voting map for the US down to the city. Someone else made a <a class="fancy-link" href="https://www.reddit.com/r/dataisbeautiful/comments/kcy21p/oc_covid_19_dashboard_in_python_by_plotly_dash/" target="_blank">COVID-19 tracker</a>, with a cool <a class="fancy-link" href="https://storage.googleapis.com/willcarh-art/img/blog/powering-dash-apps-with-bigquery/r-slash-data-is-beautiful-covid19-tracker.mp4" target="_blank">demo video</a>. How do they make all this stuff so quickly?</p><p class="content-text">The answer is <a class="fancy-link" href="https://plotly.com/python/" target="_blank">Plotly</a> and <a class="fancy-link" href="https://plotly.com/dash/" target="_blank">Dash</a>. Built atop <a class="fancy-link" href="https://d3js.org/" target="_blank">D3.js</a> and <a class="fancy-link" href="http://stack.gl/" target="_blank">stack.gl</a>, Plotly is a high-level, declarative charting library. Combined with Dash, a productive framework for building web analytic applications with highly custom user interfaces in pure Python atop of Flask, Plotly.js, and React.js, it's possible to rapidly develop complex, reactive web apps with ease.</p><p class="content-text">Let's take a look at how we can build a powerful app from scratch using Plotly and Dash and data from GCP BigQuery.</p><br><h4 class="content-subtitle">Building charts with Plotly</h4><p class="content-text">The word "Plotly" is a bit ambiguous due to how Plotly has evolved over time. Initially <a class="fancy-link" href="https://plotly.com/javascript/" target="_blank">Plotly.js</a>, Plotly has developed a wide variety of visualization and data science related tools. Plotly is the name of the <a class="fancy-link" href="https://plotly.com/about-us/" target="_blank">company</a> behind the library, as well as the open-source library itself. It has graphing libraries for JavaScript (Plotly.js), Python, R, Julia, and more. For the rest of this article, when I mention Plotly I am talking about the Python Plotly library, unless otherwise noted.</p><p class="content-text">Plotly is a mature, fully-featured library and can seem complicated to dive into. That's why Plotly (the company) created <a class="fancy-link" href="https://plotly.com/python/plotly-express/" target="_blank">Plotly Express</a>, a terse, consistent, high-level API for creating figures. Let's get started with the Dash/Plotly ecosystem with Plotly Express.</p><p class="content-text">First, we'll need to install Plotly (and for Plotly Express, we'll also need <a class="fancy-link" href="https://pandas.pydata.org/" target="_blank">pandas</a>). Let's do some housekeeping beforehand to prepare.</p><pre class="code-container"><code class="block-code">python3 -m virtualenv -p `which python3` venv<br>source venv/bin/activate<br>python -m pip install pandas<br>python -m pip install plotly</code></pre><p class="content-text">Next, let's use one of Plotly's dummy data sets to create a figure. For this example, we'll be using Plotly's <i>GDP per capita vs. life expectancy</i> dataset, and interesting relationship to study (but that's beside the point). Let's create a new file call <code class="inline-code">app.py</code>.</p><pre class="code-container"><code class="block-code">import plotly.express as px<br>df = px.data.gapminder()<br>fig = px.scatter(df.query('year==2007'), x='gdpPercap', y='lifeExp', size='pop', color='continent', hover_name='country', log_x=True, size_max=60)<br>fig.show()</code></pre><p class="content-text">Now, we can run our app with <code class="inline-code">python app.py</code>, which should open a new tab in the browser to display the generated figure.</p><img class="content-img" alt="Screenshot of generated Plotly figure of GDP per capita vs life expectancy" src="https://storage.googleapis.com/willcarh-art/img/blog/powering-dash-apps-with-bigquery/plotly-demo-0.png"><p class="img-subtitle">GDP Per Capita vs. Life Expectancy</p><p class="content-text">Pretty cool, right? Let's break down what we just built.</p><p class="content-text">The first line <code class="inline-code">import plotly.express as px</code> just imports Plotly Express from where Pip installed it. It's standard to call Plotly Express <code class="inline-code">px</code> for brevity.</p><p class="content-text">Next, we create a <a class="fancy-link" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html" target="_blank">pandas dataframe</a>, the standard data structure for pandas, from Plotly Express' test data set, which we instantiate with <code class="inline-code">px.data.gapminder()</code>. If you're curious, the data in the Gapminder dataset comes from <a class="fancy-link" href="https://www.gapminder.org/" target="_blank">gapminder.org</a>.</p><p class="content-text">Then, we use our dataframe to create a new figure. There are many different kinds of figures we can create with Plotly Express. For this example, we're using <code class="inline-code">px.scatter</code>, but other common Plotly figures are <code class="inline-code">px.bar</code>, <code class="inline-code">px.line</code>, and <code class="inline-code">px.area</code>. For the complete list, see the <a class="fancy-link" href="https://plotly.com/python-api-reference/plotly.express.html" target="_blank">Plotly Express documentation</a>. Plotly Express is nice because it gives us a single entrypoint into Plotly, and thus <code class="inline-code">px.scatter</code> can be configured in many different ways, which we control by which parameters we pass into its instantiation. For instance, let's change our third line to the following.</p><pre class="code-container"><code class="block-code">fig = px.scatter(df, x="gdpPercap", y="lifeExp", animation_frame="year", animation_group="country",<br>           size="pop", color="continent", hover_name="country", facet_col="continent",<br>           log_x=True, size_max=45, range_x=[100,100000], range_y=[25,90])</code></pre><p class="content-text">Run our code again and we'll see that the figure has changed dramatically, even though we're still using <code class="inline-code">px.scatter</code>.</p><img class="content-img" alt="Screenshot of updated Plotly graph of GDP per capita vs life expectancy" src="https://storage.googleapis.com/willcarh-art/img/blog/powering-dash-apps-with-bigquery/plotly-demo-1.png"><p class="img-subtitle">GDP Per Capita vs. Life Expectancy, grouped by continent, animated by year</p><p class="content-text">Finally, our last line <code class="inline-code">fig.show()</code> creates a <a class="fancy-link" href="https://flask.palletsprojects.com/en/1.1.x/" target="_blank">Flask</a> server to serve the figure, and then tears it down as soon as the figure is rendered in the browser. As we can see, we can build powerful figures easily with just Plotly alone, but what if we want them to update dynamically? Next, let's take a look at Dash and see if we can turn our static figure into a reactive web application.</p><br><h4 class="content-subtitle">Creating responsive web apps with Dash</h4><br><h4 class="content-subtitle">Loading data from BigQuery</h4><br><h4 class="content-subtitle">Our final product</h4><br><h4 class="content-subtitle">Conclusion</h4>
</div>
<div class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<p id="cover-credit">Artwork by <a class="fancy-link" href="https://stock.adobe.com/contributor/208829706/brushinkin-paintings" target="_blank">Brushinkin paintings</a></p>
</div>
<div id="blog-navigation-container" class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<div class="row">
		<div class="col-md-1"></div>
		<div id="blog-navigation-back" class="col-md-4 blog-navigation-chunk">
			<h3><span class="show-more">⟵</span> Back</h3>
			<p class="navigation-detail-text content-text">Go back to the blog</p>
		</div>
		<div class="col-md-2"></div>
		<div id="blog-navigation-next" class="col-md-4 blog-navigation-chunk">
			<h3>Read More <span class="show-more">⟶</span></h3>
			<p class="navigation-detail-text content-text">Why I Deleted My Facebook</p>
		</div>
		<div class="col-md-1"></div>
	</div>
</div>
<div class="spacer-small"></div>
			</div>
			<div class="spacer"></div>

			<div id="credits" class="row">
	<a id="footer-github-icon" href="https://github.com/wcarhart" target="_blank"><i class="fab fa-github"></i></a>
	<a id="footer-stackoverflow-icon" href="https://stackoverflow.com/users/6246128/wcarhart" target="_blank"><i class="fab fa-stack-overflow" data-fa-transform="left-2"></i></a>
	<a id="footer-linkedin-icon" href="https://linkedin.com/in/willcarhart" target="_blank"><i class="fab fa-linkedin" data-fa-transform="left-2"></i></a>
	<a id="footer-facebook-icon" href="../blog/why-i-deleted-my-facebook.html"><i class="fab fa-facebook-f" data-fa-transform="left-4"></i></a>
	<div style="text-align:center"><a class="fancy-link" href="../etc.html#license">&copy;&nbsp; Will Carhart <span id="year"></span></a></div>
</div>
			<div class="spacer-small"></div>
		</div>

		<!-- logo -->
		<a id="logo-container" href="../../index.html">
	<img id="logo" alt="willcarh.art logo" src="../../ico/android-chrome-512x512.png">
</a>

		<!-- dark mode toggle -->
		<div id="dark-mode-toggle-container">
	<button id="dark-mode-toggle"></button>
</div>
	</body>
</html>