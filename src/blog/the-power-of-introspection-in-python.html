<!DOCTYPE html>
<!-- This is an autogenerated file - DO NOT EDIT DIRECTLY -->
<!-- This file was generated on Fri Mar 12 2021 16:57:55 GMT-0800 (Pacific Standard Time) via the forge in willcarh.art v2.1.0-->
<!-- Learn more: https://github.com/wcarhart/willcarh.art -->
<!-- THIS IS A DEVELOPMENT BUILD, PROCEED WITH CAUTION! -->
<html lang="en">
	<head>
		<!-- metadata -->
		<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>willcarh.art</title>
<meta name="description" content="The Power of Introspection in Python" />
<meta name="twitter:card" value="summary" />
<meta property="og:name" content="willcarh.art" />
<meta property="og:url" content="https://willcarh.art/blog/the-power-of-introspection-in-python" />
<meta property="og:image" content="../../ico/android-chrome-512x512.png" />
<meta property="og:type" content="website" />
<meta property="og:description" content="The Power of Introspection in Python" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="willcarh.art" />

		<!-- CSS -->
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../../css/logo.css">
		<link rel="stylesheet" href="../../css/darkmode.css">
		<link rel="stylesheet" href="../../css/fancylink.css">
		<link rel="stylesheet" href="../../css/linkicons.css">
		<link rel="stylesheet" href="../../css/list.css">
		<link rel="stylesheet" href="../../css/markdown.css">
		<link rel="stylesheet" href="../../css/credits.css">
		<link rel="stylesheet" href="../../css/blog_specific.css">

		<!-- jQuery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<!-- Bootstrap CDN -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

		<!-- icons -->
		<link rel="apple-touch-icon" sizes="180x180" href="../../ico/apple-touch-icon.png">
	    <link rel="icon" type="image/png" sizes="32x32" href="../../ico/favicon-32x32.png">
	    <link rel="icon" type="image/png" sizes="16x16" href="../../ico/favicon-16x16.png">
	    <link rel="manifest" href="../../ico/site.webmanifest">

	    <!-- FontAwesome -->
	    <script src="https://use.fontawesome.com/releases/v5.5.0/js/all.js"></script>

		<!-- animate.css -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

		<!-- site analytics -->
		<script async defer data-domain="willcarh.art" src="https://plausible.io/js/plausible.js"></script>

		<!-- willcarh.art scripts -->
		<script src="../js/darkmode.js"></script>
		<script src="../js/year.js"></script>
		<script src="../js/epochtime.js"></script>
		<script src="../js/readtime.js"></script>
		<script src="../js/blognav.js"></script>
	</head>
	<body>
		<!-- text content -->
		<div id="content-main">
			<div class="spacer"></div>
			<div id="content-body">
				<div id="word-count" class="hidden-tidbit">884</div>
<div id="read-time" class="hidden-tidbit">5 min read</div>
<div id="next-blog-link" class="hidden-tidbit">introducing-willcarh.art</div>
<div id="blog-title-container" class="animate__animated animated_faster animate__fadeInUp animate__delay-1s">
	<h1 id="blog-title">The Power of Introspection in Python</h1>
	<h3 id="blog-subtitle">getattr explained</h3>
</div>
<div id="blog-credits" class="animate__animated animated_faster animate__fadeInUp animate__delay-2s">
	<div class="row justify-content-center">
		<div id="blog-author-img-container">
			<img id="blog-author-img" alt="author profile image" src="https://storage.googleapis.com/willcarh-art/img/profile.jpg">
		</div>
		<div id="blog-credits-details">
			<h5 id="blog-author">Will Carhart</h5>
			<p class="blog-metadata epochtime-hover">Published on April 17th, 2019 at 8:51 AM PDT</p>
			<p class="blog-metadata epochtime-hover">Updated on November 28th, 2020 at 5:33 PM PST</p>
			<p class="blog-metadata readtime-hover"><span class="color">5 min read</span></p>
		</div>
	</div>
</div>
<div id="blog-cover-container" class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<img id="blog-cover" alt="The Power of Introspection in Python cover image" src="https://storage.googleapis.com/willcarh-art/img/blog/the-power-of-introspection-in-python/cover.jpg">
</div>
<div id="stale-content-container" class="blog-border animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<h4 class="stale-content-title">Pardon the Interruption</h4>
	<p class="content-text">This blog post was written under a previous major version of <a class="fancy-link" href="../../index.html">willcarh.art</a> (e.g. <code class="inline-code">v1.x</code> vs. <code class="inline-code">v2.x</code>). This may seem trivial, but because some of my blog posts reference the website's code, links and code snippets may no longer be valid. Thank you for understanding and please enjoy the post!</p>
</div>
<div id="blog-content-container" class="blog-border animate__animated animated_faster animate__fadeIn animate__delay-4s">
    <h4 class="content-subtitle">What is Introspection?</h4><p class="content-text">Introspection is one of those programming buzzwords that gets thrown around, but what does it actually mean? A quick Google search of introspection returns <i>the examination or observation of one's own mental and emotional processes.</i> For a human, introspection is essentially thinking about thinking, such as reconsidering why we acted a certain way or made a decision in the past.</p><p class="content-text">Introspection with Python is conceptually the same as with humans. We are essentially asking Python to give us some information about itself, whether it be about an instance of a class, object, etc. On the surface, this can sound complex, but in practice it's quite simple. Let's dive right in.</p><br><h4 class="content-subtitle">Introducing <code class="inline-code">getattr()</code></h4><p class="content-text">Suppose we have the following Python class:</p><pre class="code-container"><code class="block-code">class Car():<br>    def __init__(self):<br>        self.miles = 0<br>    def drive(self, miles):<br>        self.miles += miles</code></pre><p class="content-text">Now, let's create a new <code class="inline-code">Car</code> and have it drive a little bit.</p><pre class="code-container"><code class="block-code">&gt;&gt;&gt; car = Car()<br>&gt;&gt;&gt; car.drive(10)<br>&gt;&gt;&gt; car.miles<br>10</code></pre><p class="content-text">We can also use the Python builtin function <code class="inline-code">getattr</code> to accomplish this.</p><pre class="code-container"><code class="block-code">&gt;&gt;&gt; car = Car()<br>&gt;&gt;&gt; getattr(car, 'drive')(10)<br>&gt;&gt;&gt; getattr(car, 'miles')<br>10</code></pre><p class="content-text">What just happened? We used the <code class="inline-code">getattr</code> function to get named attributes from our <code class="inline-code">Car</code> class. Even cooler, not only can we use <code class="inline-code">getattr</code> to get the value of class attributes, we can also use it to call functions!</p><div class="shoutout">
	<p class="shoutout-title"><b>Summary</b></p>
	<p class="shoutout-text"><code class="inline-code">getattr(object, 'val')</code> is equivalent to <code class="inline-code">object.val</code></p>
</div><br><br><h4 class="content-subtitle">Why is this powerful?</h4><p class="content-text">On the surface, the introspective power of <code class="inline-code">getattr</code> may not be immediately apparent. After all, it took us the same number of steps to drive our <code class="inline-code">Car</code> with introspection as without. However, consider the case where you want to call a function via a variable, like a string. Let's rewrite our <code class="inline-code">Car</code> class to be a bit more generic:</p><pre class="code-container"><code class="block-code">class Car:<br>    def __init__(self):<br>        self.miles = 0<br>        self.velocity = 0<br>    def drive(self, miles):<br>        self.miles += miles<br>    def accelerate(self, velocity):<br>        self.velocity += velocity<br><br>    def do_action(name, value):<br>        getattr(self, name)(value)</code></pre><p class="content-text">Now we can drive our car by calling <code class="inline-code">drive()</code> or speed up by calling <code class="inline-code">accelerate()</code>. However, we can also use the new <code class="inline-code">do_action()</code> function:</p><pre class="code-container"><code class="block-code">&gt;&gt;&gt; car = Car()<br>&gt;&gt;&gt; car.do_action('drive', 10)<br>&gt;&gt;&gt; car.miles<br>10<br>&gt;&gt;&gt; car.do_action('accelerate', 30)<br>&gt;&gt;&gt; car.velocity<br>30</code></pre><p class="content-text">This makes automating things in Python much easier!</p><br><h4 class="content-subtitle">Why does this matter?</h4><p class="content-text">I'm definitely one to learn by example. Why does introspection matter? Where can I <i>actually</i> use it in my Python? Here's a simple example.</p><p class="content-text">Consider the Python builtin dunder <code class="inline-code">&#95;&#95;dict&#95;&#95;</code>. This returns a dictionary of the class attributes for a class. If we had our Car class from above, we could use <code class="inline-code">&#95;&#95;dict&#95;&#95;</code> to get its values:</p><pre class="code-container"><code class="block-code">&gt;&gt;&gt; car = Car()<br>&gt;&gt;&gt; car.miles = 10<br>&gt;&gt;&gt; car.velocity = 30<br>&gt;&gt;&gt; car.__dict__<br>{'miles': 10, 'velocity': 30}</code></pre><p class="content-text">Do you think we can recreate some of <code class="inline-code">&#95;&#95;dict&#95;&#95;</code>'s functionality using introspection? You bet we can! Let's use <code class="inline-code">getattr</code> to write a function that will <i>JSONize</i> a class, or take its attributes and turn them into a JSON string.</p><pre class="code-container"><code class="block-code">def jsonize(self):<br>    variables = [var for var in dir(self) if not var.startswith(('_', '__')) and not callable(getattr(self, var))]<br>    return "{" + ",".join([f"\"{var}\": \"{getattr(self, var)}\"" for var in variables]) + "}"</code></pre><p class="content-text">This might seem like some Python mumbo-jumbo, so let's break it down! The first line of <code class="inline-code">jsonize</code> gets all of the variables in the class (<code class="inline-code">self</code>). Then, the second line calls <code class="inline-code">getattr</code> for each variable, and arranges them nicely into JSON format. See, not so bad! Check out the code <a class="fancy-link" href="https://github.com/wcarhart/willcarh.art-snippets/blob/master/the-power-of-introspection-in-python/snippet.py" target="_blank">here</a>.</p><br><h4 class="content-subtitle">A real life example</h4><p class="content-text"><code class="inline-code">getattr</code> is actually used in <a class="fancy-link" href="../../index.html">willcarh.art</a>! All of the content for the site's database is read from a JSON file. Rather than hard coding this content in a Python file, I wrote a simple script called the <code class="inline-code">Scribe</code> to read from the JSON file and upload to <a class="fancy-link" href="../../index.html">willcarh.art</a>'s database. Now, there are multiple different models, or classes, in the database, so <code class="inline-code">Scribe</code> needs to be able to dynamically create Python objects. Here's how I used <code class="inline-code">getattr</code> to accomplish this...</p><p class="content-text">My JSON schema is defined as such:</p><pre class="code-container"><code class="block-code">[<br>  {<br>    "class": "...",<br>    "contents": "..."<br>  }<br>]</code></pre><p class="content-text">After some data validation, I attempt to make an instance of the class, load in its content from the <code class="inline-code">contents</code> field in the JSON, and save it to the database. Note that in this call to <code class="inline-code">getattr</code>, the first argument is the <i>module</i> and the second is the <i>class</i>, whereas in our earlier usage the first argument was the <i>class</i> and the second argument was the <i>attribute</i>. <code class="inline-code">getattr</code> is very flexible!</p><pre class="code-container"><code class="block-code">def parse_data(entity):<br>    Class = getattr(models, entity['class'])<br>    instance = Class(**entity['content'])<br>    instance.save()</code></pre><p class="content-text">And that's it! These few lines of code save me the hassle of micromanaging my database. This is a watered down version of <code class="inline-code">Scribe</code> for demonstration purposes. If you'd like to see the full source code, check it out <a class="fancy-link" href="https://github.com/wcarhart/willcarh.art-v1/blob/master/scribe.py" target="_blank">here</a>.</p><div class="shoutout">
	<p class="shoutout-title"><b>Summary</b></p>
	<p class="shoutout-text"><code class="inline-code">getattr</code> is a powerful Python builtin. You can use it to acquire a class instance from a module or an attribute from a class, as well as calling class functions.</p>
</div><br><p class="content-text">If you're interested in learning more about <a class="fancy-link" href="https://docs.python.org/3/library/functions.html#getattr" target="_blank"><code class="inline-code">getattr</code></a>, <a class="fancy-link" href="https://linux.die.net/diveintopython/html/power_of_introspection/index.html" target="_blank">here's a great introspection article</a>. You could also consider looking into <a class="fancy-link" href="https://docs.python.org/3/library/functions.html#setattr" target="_blank"><code class="inline-code">setattr</code></a>, <a class="fancy-link" href="https://docs.python.org/3/library/functions.html#hasattr" target="_blank"><code class="inline-code">hasattr</code></a>, and <a class="fancy-link" href="https://docs.python.org/3/library/functions.html#delattr" target="_blank"><code class="inline-code">delattr</code></a>.</p><br><p class="content-text centered-text">ü¶â</p>
</div>
<div class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<p id="cover-credit">Artwork by <a class="fancy-link" href="https://blog.camposanto.com/post/138965082204/firewatch-launch-wallpaper-when-we-redid-the" target="_blank">Campo Santo</a></p>
</div>
<div id="blog-navigation-container" class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<div class="row">
		<div class="col-md-1"></div>
		<div id="blog-navigation-back" class="col-md-4 blog-navigation-chunk">
			<h3><span class="show-more">‚üµ</span> Back</h3>
			<p class="navigation-detail-text content-text">Go back to the blog</p>
		</div>
		<div class="col-md-2"></div>
		<div id="blog-navigation-next" class="col-md-4 blog-navigation-chunk">
			<h3>Read More <span class="show-more">‚ü∂</span></h3>
			<p class="navigation-detail-text content-text">Introducing willcarh.art</p>
		</div>
		<div class="col-md-1"></div>
	</div>
</div>
<div class="spacer-small"></div>
			</div>
			<div class="spacer"></div>

			<div id="credits" class="row">
	<a id="footer-github-icon" href="https://github.com/wcarhart" target="_blank"><i class="fab fa-github"></i></a>
	<a id="footer-stackoverflow-icon" href="https://stackoverflow.com/users/6246128/wcarhart" target="_blank"><i class="fab fa-stack-overflow" data-fa-transform="left-2"></i></a>
	<a id="footer-linkedin-icon" href="https://linkedin.com/in/willcarhart" target="_blank"><i class="fab fa-linkedin" data-fa-transform="left-2"></i></a>
	<a id="footer-facebook-icon" href="../blog/why-i-deleted-my-facebook.html"><i class="fab fa-facebook-f" data-fa-transform="left-4"></i></a>
	<div style="text-align:center"><a class="fancy-link" href="../etc.html#license">&copy;&nbsp; Will Carhart <span id="year"></span></a></div>
</div>
			<div class="spacer-small"></div>
		</div>

		<!-- logo -->
		<a id="logo-container" href="../../index.html">
	<img id="logo" alt="willcarh.art logo" src="../../ico/android-chrome-512x512.png">
</a>

		<!-- dark mode toggle -->
		<div id="dark-mode-toggle-container">
	<button id="dark-mode-toggle"></button>
</div>
	</body>
</html>