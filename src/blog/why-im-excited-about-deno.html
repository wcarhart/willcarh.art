<!DOCTYPE html>
<!-- This is an autogenerated file - DO NOT EDIT DIRECTLY -->
<!-- This file was generated on Sat May 08 2021 01:14:49 GMT-0700 (Pacific Daylight Time) via the forge in willcarh.art v2.1.0-->
<!-- Learn more: https://github.com/wcarhart/willcarh.art -->
<!-- THIS IS A DEVELOPMENT BUILD, PROCEED WITH CAUTION! -->
<html lang="en">
	<head>
		<!-- metadata -->
		<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>willcarh.art</title>
<meta name="description" content="Why Im Excited About Deno" />
<meta name="twitter:card" value="summary" />
<meta property="og:name" content="willcarh.art" />
<meta property="og:url" content="https://willcarh.art/blog/why-im-excited-about-deno" />
<meta property="og:image" content="../../ico/android-chrome-512x512.png" />
<meta property="og:type" content="website" />
<meta property="og:description" content="Why Im Excited About Deno" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="willcarh.art" />

		<!-- CSS -->
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../../css/logo.css">
		<link rel="stylesheet" href="../../css/darkmode.css">
		<link rel="stylesheet" href="../../css/fancylink.css">
		<link rel="stylesheet" href="../../css/linkicons.css">
		<link rel="stylesheet" href="../../css/list.css">
		<link rel="stylesheet" href="../../css/markdown.css">
		<link rel="stylesheet" href="../../css/credits.css">
		<link rel="stylesheet" href="../../css/blog_specific.css">

		<!-- jQuery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<!-- Bootstrap CDN -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

		<!-- icons -->
		<link rel="apple-touch-icon" sizes="180x180" href="../../ico/apple-touch-icon.png">
	    <link rel="icon" type="image/png" sizes="32x32" href="../../ico/favicon-32x32.png">
	    <link rel="icon" type="image/png" sizes="16x16" href="../../ico/favicon-16x16.png">
	    <link rel="manifest" href="../../ico/site.webmanifest">

	    <!-- FontAwesome -->
	    <script src="https://use.fontawesome.com/releases/v5.5.0/js/all.js"></script>

		<!-- animate.css -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

		<!-- site analytics -->
		<script async defer data-domain="willcarh.art" src="https://plausible.io/js/plausible.js"></script>

		<!-- willcarh.art scripts -->
		<script src="../js/darkmode.js"></script>
		<script src="../js/year.js"></script>
		<script src="../js/epochtime.js"></script>
		<script src="../js/readtime.js"></script>
		<script src="../js/blognav.js"></script>
	</head>
	<body>
		<!-- text content -->
		<div id="content-main">
			<div class="spacer"></div>
			<div id="content-body">
				<div id="word-count" class="hidden-tidbit">1610</div>
<div id="read-time" class="hidden-tidbit">9 min read</div>
<div id="next-blog-link" class="hidden-tidbit">a-case-for-git-filters</div>
<div id="blog-title-container" class="animate__animated animated_faster animate__fadeInUp animate__delay-1s">
	<h1 id="blog-title">Why I'm Excited About Deno</h1>
	<h3 id="blog-subtitle">And why you should be too</h3>
</div>
<div id="blog-credits" class="animate__animated animated_faster animate__fadeInUp animate__delay-2s">
	<div class="row justify-content-center">
		<div id="blog-author-img-container">
			<img id="blog-author-img" alt="author profile image" src="https://storage.googleapis.com/willcarh-art/img/profile.jpg">
		</div>
		<div id="blog-credits-details">
			<h5 id="blog-author">Will Carhart</h5>
			<p class="blog-metadata epochtime-hover">Published on September 30th, 2020 at 12:04 PM PDT</p>
			<p class="blog-metadata epochtime-hover">Updated on April 24th, 2021 at 5:14 PM PDT</p>
			<p class="blog-metadata readtime-hover"><span class="color">9 min read</span></p>
		</div>
	</div>
</div>
<div id="blog-cover-container" class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<img id="blog-cover" alt="Why I'm Excited About Deno cover image" src="https://storage.googleapis.com/willcarh-art/img/blog/why-im-excited-about-deno/cover.jpg">
</div>

<div id="blog-content-container" class="blog-border animate__animated animated_faster animate__fadeIn animate__delay-4s">
    <h4 class="content-subtitle">What is Deno?</h4><p class="content-text"><a class="fancy-link" href="https://deno.land" target="_blank">Deno</a> is a simple, modern, and secure runtime for JavaScript and TypeScript that uses V8 and is built in Rust. Without the software buzzwords and technical jargon, Deno is an up-and-coming library for JavaScript that rivals <a class="fancy-link" href="https://nodejs.org/" target="_blank">Node.js</a>, written by Node.js' original author, <a class="fancy-link" href="https://en.wikipedia.org/wiki/Ryan_Dahl" target="_blank">Ryan Dahl</a>. It was originally announced by Dahl at <a class="fancy-link" href="https://2018.jsconf.eu/" target="_blank">JSConf EU 2018</a> and now has stable releases.</p><p class="content-text">Deno is interesting because it attempts to fix Node.js' shortcomings. It introduces novel features to address Dahl's complaints of Node.js without making a new language and ecosystem that is too complex for existing JS devs to approach. It still uses the <a class="fancy-link" href="https://v8.dev" target="_blank">V8 JavaScript engine</a> (Google's JavaScript engine), which means it will compile JavaScript (and TypeScript) down to C++. Different from Node.js, however, Deno is written in Rust and embraces modern web development practices that have emerged organically within the existing JavaScript ecosystem. I'm excited to talk about its prospects, drawbacks, and potential uses, so let's dive in!</p><br><h4 class="content-subtitle">So, why Deno over Node.js?</h4><p class="content-text">The Node.js ecosystem and community has grown into one of the largest in the world. So, why change it? Deno’s design was informed by Dahl’s <a class="fancy-link" href="https://www.youtube.com/watch?v=M3BM9TB-8yA" target="_blank">10 Things I Regret About Node.js</a> talk where he shared his motivations for moving away from Node.js. He stated that while he does enjoy coding in Node.js, his <i>problems with Node.js are almost entirely around how it manages user code</i>, and broke down some key features he wished he had implemented from the outset with Node.js. Here's the TL;DW.</p><p class="content-text"><b class="bold-text">Not sticking with promises</b></p><p class="content-text">If you're familiar with the history of Node.js, you'll remember that the language had a rocky path of getting to promises, where it actually added them in one release and removed them in a later one. It took a while for Node.js to then arrive at the <code class="inline-code">await</code>/<code class="inline-code">async</code> pattern, which finally gave developers a break from <a class="fancy-link" href="http://callbackhell.com/" target="_blank">"callback hell"</a>.</p><p class="content-text"><b class="bold-text">Security</b></p><p class="content-text">Any Node.js script by default can access the file system, the network stack, environment variables, and more. While this is a boon during development, it can be dangerous if left unmitigated during production. If someone can figure out how to inject malicious code into your application, they could wreak havoc on your file system and application secrets.</p><p class="content-text"><b class="bold-text">The build system</b></p><p class="content-text">At its inception, Node.js utilized <a class="fancy-link" href="https://gyp.gsrc.io/" target="_blank">Generate Your Projects</a>, or GYP, for building. This is because at the time GYP was used by <a class="fancy-link" href="https://www.google.com/chrome/" target="_blank">Google Chrome</a> (which also runs on V8). However, Google changed to <a class="fancy-link" href="https://gn.googlesource.com/gn/" target="_blank">GN</a> as fundemental Node.js development was underway. Rather than follow suit, Node.js dug into GYP, creating <a class="fancy-link" href="https://github.com/nodejs/node-gyp" target="_blank">node-gyp</a> and becoming the sole user of GYP. Dahl argues this is the biggest individual failure of the Node.js leadership team.</p><p class="content-text"><b class="bold-text">package.json</b></p><p class="content-text">The <code class="inline-code">package.json</code> file in Node.js and <a class="fancy-link" href="https://www.npmjs.com/" target="_blank">NPM</a> has become a requirement for all Node.js applications. It is the source of truth for dependency versions, package description, license, and other information defined by the developer, which Dahl argues is <i>boilerplate noise</i> and should not be included. In addition, he argues that allowing <code class="inline-code">package.json</code> gave rise to the concept of a "module" as a directory of files, which is an abstraction that does not exist on the web.</p><p class="content-text"><b class="bold-text">node_modules</b></p><p class="content-text">If you've spent any time with NPM, I'm sure you know the classic fix to dependency resolution problems: <code class="inline-code">rm -rf node&#95;modules/ && npm install</code>. Dahl argues that because the <code class="inline-code">node&#95;modules/</code> folder is recreated for every project (even if a dependency is shared between projects), it complicates the module resolution algorithm and bloats the total application size.</p><p class="content-text"><b class="bold-text">Omitting extensions when importing packages</b></p><p class="content-text">In Node.js, when you import a package using the <code class="inline-code">require('module')</code> syntax, you don't include the extension (e.g. <code class="inline-code">.js</code>). Dahl argues that this is needlessly less explicit in favor of a "clean" syntax and requires the module loader to query the file system at multiple locations to <i>attempt</i> to resolve what the developer intended.</p><p class="content-text"><b class="bold-text">index.js</b></p><p class="content-text">NPM initially looked for the application entrypoint called <code class="inline-code">index.js</code>, which was derived from how browsers load <code class="inline-code">index.html</code> as home/landing pages for websites. Dahl argues that this is just as unnecessary as <code class="inline-code">package.json</code>.</p><br><h4 class="content-subtitle">Why I'm excited about Deno</h4><p class="content-text">The result of Dahl's reflection upon Node.js is <a class="fancy-link" href="https://deno.land/" target="_blank">Deno</a>, a new runtime for JavaScript and TypeScript built in Rust. While still in its infancy, Deno has the potential to become a thriving ecosystem rival to Node.js. Here's what I'm most excited about.</p><p class="content-text"><b class="bold-text">Native TypeScript support</b></p><p class="content-text">No more transpiling! Deno supports TypeScript out of the box, so you can write native <code class="inline-code">.ts</code> files and use them alongside <code class="inline-code">.js</code> files.</p><p class="content-text"><b class="bold-text">All async actions return a promise by default</b></p><p class="content-text">If you peruse the Node.js documentation, the standard library is a fragmented and aging mess that reflects Node.js' slow acceptance of promises. Deno is designed to work with promises out of the box, as <i>all the asynchronous APIs in Deno return a promise</i>. In addition, you can use the <code class="inline-code">await</code> keyword at the top-level.</p><p class="content-text"><b class="bold-text">Improved security and permissions</b></p><p class="content-text">By default, all permissions are reserved in Deno (thus the "secure runtime" portion of the tagline). What this means in practice is that a standard Deno script cannot access the file system, network stack, etc. without explicit permission. To access a local file or execute a network request, you must specify the necessary permission with the <code class="inline-code">--allow-read=...</code> or <code class="inline-code">--allow-net</code> options.</p><p class="content-text"><b class="bold-text">A standard library that is actually standardized</b></p><p class="content-text">In Dahl's talk he mentioned that in his hiatus from using Node.js he switched to Go, where he saw how much cleaner the standard library was. With Deno, a myriad of helpful functionality comes with the standard library, such as HTTP and networking operations, linting, testing, logging, datetime format manipulation, encryption, command line parsing, UUID generation, and much more. With Node.js, most, if not all, of this functionality was relegated to external libraries and modules, creating standardization confusion among developers.</p><p class="content-text"><b class="bold-text">No more NPM, <code class="inline-code">package.json</code>, or <code class="inline-code">node&#95;modules/</code></b></p><p class="content-text">This one has caused a little bit of controversy (check out this <a class="fancy-link" href="https://github.com/denoland/deno/issues/47" target="_blank">GitHub issue</a> for <s>some drama</s> a heated discussion). Deno allows developers to import modules via a local path and a URL, and uses a built-in package manager to resolve dependencies. Dependencies are cached on the machine so they are not needlessly duplicated between projects. You can use <code class="inline-code">deno bundle</code> to bundle all of your application's code into one shippable product. This allows developers to do things like <code class="inline-code">deno run https://deno.land/std/examples/welcome.ts</code> without something like <code class="inline-code">git clone https://deno.land/std/examples && yarn install</code> first.</p><p class="content-text"><b class="bold-text">Emphasis on coding standards</b></p><p class="content-text">Deno comes packed out of the box with bundling, testing, and linting. Deno's <a class="fancy-link" href="https://deno.land/manual/tools/bundler" target="_blank">bundler</a> outputs a single JavaScript file which includes all dependencies of the specified input. Running <a class="fancy-link" href="https://deno.land/manual/testing" target="_blank"><code class="inline-code">deno test</code></a> will use Deno's built-in test runner to search recursively for test files and execute them. Deno's <a class="fancy-link" href="https://github.com/denoland/deno_lint" target="_blank">linter</a> has functionality comparable to <a class="fancy-link" href="https://eslint.org/" target="_blank">ESLint</a> while executing <i>100x faster</i> on average.</p><br><h4 class="content-subtitle">A few caveats</h4><p class="content-text"><b class="bold-text">Lack of clarity around installed Deno Packages</b></p><p class="content-text">When a dependency is installed, Deno caches the files in <code class="inline-code">&#36;DENO&#95;DIR</code>, which on macOS is <code class="inline-code">&#36;HOME/Library/Caches/deno</code> or <code class="inline-code">&#36;HOME/.deno</code> (run <code class="inline-code">deno info</code> for system specific configuration). Suppose one local Deno project utilizes <code class="inline-code">v1.x</code> of a dependency, while another utilizes <code class="inline-code">v1.y</code>. At the time of development, both local projects installed the latest version of the dependency, which happened to be <code class="inline-code">v1.x</code> for the first project and <code class="inline-code">v1.y</code> for the second. From the developer's perspective, it is not immediately apparent what version the first project is using after the second project installs <code class="inline-code">v1.y</code>. This is a difference in design philosophy between Node.js and Deno. Node.js relies heavily on <code class="inline-code">package.json</code>, while Dahl argues that <code class="inline-code">package.json</code> is largely unnecessary. Only time will tell if Deno's dependency management system will become as stable as that of Node.js.</p><div class="shoutout">
	<p class="shoutout-title"><b>Note</b></p>
	<p class="shoutout-text">Since writing this article, there have been changes to Deno. Deno has developed <a class="fancy-link" href="https://deno.land/manual/examples/manage_dependencies" target="_blank"><code class="inline-code">deps.ts</code></a>, which can act as a single-source-of-truth for dependencies in a project. However, the differing opinions in design philosophies between Deno and Node.js still exist.</p>
</div><br><p class="content-text"><b class="bold-text">Backwards compatibility</b></p><p class="content-text">Deno applications are not backwards compatible with Node.js, but that's not really the point. Deno is seen by many as the "next interation" of the server-side JavaScript ecosystem unburdened by the shortcomings of Node.js. One caveat is the lack of backwards compatibility with Node.js, but frankly, I think that's OK.</p><br><h4 class="content-subtitle">Install</h4><p class="content-text">If you want to take Deno for a spin, it's easy to install.</p><table><thead><tr><th class="table-align-left" colspan="1">Installation</th>
<th class="table-align-left" colspan="1">Command</th></tr></thead><tbody><tr><td class="table-align-left"> Shell (Linux) </td>
<td class="table-align-left"> <code class="inline-code">-fsSL https://deno.land/x/install/install.sh | sh</code> </td></tr>
<tr><td class="table-align-left"> Homebrew (macOS, Linux) </td>
<td class="table-align-left"> <code class="inline-code">brew install deno</code> </td></tr>
<tr><td class="table-align-left"> PowerShell (Windows) </td>
<td class="table-align-left"> <code class="inline-code">iwr https://deno.land/x/install/install.ps1 -useb | iex</code> </td></tr>
<tr><td class="table-align-left"> Chocolatey (Windows) </td>
<td class="table-align-left"> <code class="inline-code">choco install deno</code> </td></tr>
<tr><td class="table-align-left"> Scoop (Windows) </td>
<td class="table-align-left"> <code class="inline-code">scoop install deno</code> </td></tr>
<tr><td class="table-align-left"> Build from source </td>
<td class="table-align-left"> <code class="inline-code">cargo install deno --locked</code> </td></tr></tbody></table><br><h4 class="content-subtitle">Demo</h4><p class="content-text">Here's a really quick demo that showcases Deno's dependency resolution, sandboxing permissions, and standard library.</p><p class="content-text">First, create a file called <code class="inline-code">server.ts</code>.</p><pre class="code-container"><code class="block-code">import { serve } from "https://deno.land/std@0.59.0/http/server.ts";<br>const s = serve({ port: 8000 });<br>for await (const req of s) {<br>   req.respond({ body: "Hello World\n" });<br>}</code></pre><p class="content-text">Then, start the server.</p><pre class="code-container"><code class="block-code">deno run --allow-net server.ts</code></pre><p class="content-text">Finally, navigate to <code class="inline-code">localhost:8000</code>.</p><br><h4 class="content-subtitle">My own Deno experiment</h4><p class="content-text">I wanted to play around with Deno myself in a non-trivial fashion. I decided to create an automated Sudoku solver, dubbed <a class="fancy-link" href="../project/doku.html">doku</a>, to test out Deno. I had a fun time with Deno and built a cool project, so it was a win-win. You can try out doku yourself via <code class="inline-code">brew install wcarhart/tools/doku</code>, or check out its <a class="fancy-link" href="../project/doku.html">project page</a> or its <a class="fancy-link" href="https://github.com/wcarhart/doku" target="_blank">repository</a>.</p><br><h4 class="content-subtitle">Conclusion</h4><p class="content-text">Node.js has stablized to a very functional and competent toolset, but it has been a bumpy road and has not been without its problems. I think Deno is a cool evolution of the Node.js ecosystem and brings a lot of helpful changes to the table that are rooted in experience. It's not without its own issues, but I hope it is here to stay. I doubt it will ever fully replace Node.js, but I would be happy to move over fully to Deno in the future if it truly became the standard for server-side JS. If you want to learn more about Deno, check out its <a class="fancy-link" href="https://deno.land" target="_blank">website</a>, its <a class="fancy-link" href="https://github.com/denoland/deno" target="_blank">source code</a>, or other <a class="fancy-link" href="https://github.com/denolib/awesome-deno" target="_blank">awesome Deno projects</a>.</p><br><p class="content-text centered-text">🦉</p>
</div>
<div class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<p id="cover-credit">Artwork by <a class="fancy-link" href="https://stock.adobe.com/contributor/204918064/grandfailure" target="_blank">grandfailure</a></p>
</div>
<div id="blog-navigation-container" class="animate__animated animated_faster animate__fadeIn animate__delay-4s">
	<div class="row">
		<div class="col-md-1"></div>
		<div id="blog-navigation-back" class="col-md-4 blog-navigation-chunk">
			<h3><span class="show-more">⟵</span> Back</h3>
			<p class="navigation-detail-text content-text">Go back to the blog</p>
		</div>
		<div class="col-md-2"></div>
		<div id="blog-navigation-next" class="col-md-4 blog-navigation-chunk">
			<h3>Read More <span class="show-more">⟶</span></h3>
			<p class="navigation-detail-text content-text">A Case for Git Filters</p>
		</div>
		<div class="col-md-1"></div>
	</div>
</div>
<div class="spacer-small"></div>
			</div>
			<div class="spacer"></div>

			<div id="credits" class="row">
	<a id="footer-github-icon" href="https://github.com/wcarhart" target="_blank"><i class="fab fa-github"></i></a>
	<a id="footer-stackoverflow-icon" href="https://stackoverflow.com/users/6246128/wcarhart" target="_blank"><i class="fab fa-stack-overflow" data-fa-transform="left-2"></i></a>
	<a id="footer-linkedin-icon" href="https://linkedin.com/in/willcarhart" target="_blank"><i class="fab fa-linkedin" data-fa-transform="left-2"></i></a>
	<a id="footer-facebook-icon" href="../blog/why-i-deleted-my-facebook.html"><i class="fab fa-facebook-f" data-fa-transform="left-4"></i></a>
	<div style="text-align:center"><a class="fancy-link" href="../etc.html#license">&copy;&nbsp; Will Carhart <span id="year"></span></a></div>
</div>
			<div class="spacer-small"></div>
		</div>

		<!-- logo -->
		<a id="logo-container" href="../../index.html">
	<img id="logo" alt="willcarh.art logo" src="../../ico/android-chrome-512x512.png">
</a>

		<!-- dark mode toggle -->
		<div id="dark-mode-toggle-container">
	<button id="dark-mode-toggle"></button>
</div>
	</body>
</html>